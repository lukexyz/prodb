---

title: 00 Prodb API details


keywords: fastai
sidebar: home_sidebar

summary: "`nbdev` Example function."
description: "`nbdev` Example function."
nb_path: "nbs/00_core.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/00_core.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Prodb-API">Prodb API<a class="anchor-link" href="#Prodb-API"> </a></h2><p>Create pandas dataframe for manipulation</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="1.0-Generate-Db">1.0 Generate Db<a class="anchor-link" href="#1.0-Generate-Db"> </a></h2><p>Initialise database with <a href="/prodb/core.html#generate_db"><code>generate_db</code></a> call.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="generate_db" class="doc_header"><code>generate_db</code><a href="https://github.com/lukexyz/prodb/tree/master/prodb/core.py#L15" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>generate_db</code>(<strong><code>dbpath</code></strong>=<em><code>'db.csv'</code></em>, <strong><code>cols</code></strong>=<em><code>['_c1', '_c2', '_c3']</code></em>, <strong><code>verbose</code></strong>=<em><code>True</code></em>, <strong><code>prefill</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Create example database</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Generate empty <code>db</code> object with arbitary columns.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">generate_db</span><span class="p">(</span><span class="n">cols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;c1&#39;</span><span class="p">,</span> <span class="s1">&#39;c2&#39;</span><span class="p">,</span> <span class="s1">&#39;c3&#39;</span><span class="p">])</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>âœ“ðŸ’¾ db.csv (9 kb)
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>c1</th>
      <th>c2</th>
      <th>c3</th>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Generate <code>db</code> with some example data.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">generate_db</span><span class="p">(</span><span class="n">prefill</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>âœ“ðŸ’¾ db.csv (96 kb)
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>mood</th>
      <th>message</th>
      <th>time_utc</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Sam</td>
      <td>ðŸ˜Š</td>
      <td>hi</td>
      <td>2021-12-30 15:43:28</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Grant</td>
      <td>ðŸ˜µ</td>
      <td>hello</td>
      <td>2021-12-30 15:43:28</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="2.0-Insert-Row">2.0 Insert Row<a class="anchor-link" href="#2.0-Insert-Row"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="insert_row" class="doc_header"><code>insert_row</code><a href="https://github.com/lukexyz/prodb/tree/master/prodb/core.py#L35" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>insert_row</code>(<strong><code>df</code></strong>, <strong><code>data</code></strong>, <strong><code>dbpath</code></strong>=<em><code>'db.csv'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="insert_rows" class="doc_header"><code>insert_rows</code><a href="https://github.com/lukexyz/prodb/tree/master/prodb/core.py#L41" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>insert_rows</code>(<strong><code>df</code></strong>, <strong><code>data</code></strong>, <strong><code>dbpath</code></strong>=<em><code>'db.csv'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Example:-Insert-single-row">Example: Insert single row<a class="anchor-link" href="#Example:-Insert-single-row"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">generate_db</span><span class="p">(</span><span class="n">cols</span><span class="o">=</span><span class="s1">&#39;name mood message&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>

<span class="c1"># ================================================================ #</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;George&#39;</span><span class="p">,</span> <span class="s1">&#39;mood&#39;</span><span class="p">:</span> <span class="s1">&#39;ðŸ‘¹&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span><span class="s1">&#39;hi&#39;</span><span class="p">}</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">insert_row</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

<span class="c1"># ================================================================ #</span>

<span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>âœ“ðŸ’¾ db.csv (18 kb)
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>mood</th>
      <th>message</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>George</td>
      <td>ðŸ‘¹</td>
      <td>hi</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Example:-Insert-multiple-rows">Example: Insert multiple rows<a class="anchor-link" href="#Example:-Insert-multiple-rows"> </a></h3><p>Note: <code>prodb</code> allows additional columns to be added after the database has been initialised.</p>
<p>i.e. the <code>['name', 'mood', 'message']</code> columns that initialise the db, play nice when the additional <code>time_utc</code> dict is passed in. NaNs are imputed for previous rows.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>First, a helper function to clean up timestamp calls.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="utc_now" class="doc_header"><code>utc_now</code><a href="https://github.com/lukexyz/prodb/tree/master/prodb/core.py#L49" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>utc_now</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">generate_db</span><span class="p">(</span><span class="n">cols</span><span class="o">=</span><span class="s1">&#39;name mood message&#39;</span><span class="o">.</span><span class="n">split</span><span class="p">())</span>

<span class="c1"># ================================================================ #</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Sam&#39;</span><span class="p">,</span> <span class="s1">&#39;Grant&#39;</span><span class="p">],</span>
        <span class="s1">&#39;mood&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;ðŸ˜Š&#39;</span><span class="p">,</span> <span class="s1">&#39;ðŸ˜µ&#39;</span><span class="p">],</span>
        <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;hello from London, UK&#39;</span><span class="p">,</span> <span class="s1">&#39;hello from Christchurch, NZ&#39;</span><span class="p">],</span>
        <span class="s1">&#39;time_utc&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="n">utc_now</span><span class="p">(),</span> <span class="n">utc_now</span><span class="p">()]}</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">insert_rows</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

<span class="c1"># ================================================================ #</span>

<span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>âœ“ðŸ’¾ db.csv (18 kb)
</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>mood</th>
      <th>message</th>
      <th>time_utc</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Sam</td>
      <td>ðŸ˜Š</td>
      <td>hello from London, UK</td>
      <td>2021-12-30 15:43:34</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Grant</td>
      <td>ðŸ˜µ</td>
      <td>hello from Christchurch, NZ</td>
      <td>2021-12-30 15:43:34</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Add another entry to the bottom of the database using <code>insert_row()</code>.</p>
<p>Note: Data columns from dictionary do not need to be in pre-defined order.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;time_utc&#39;</span> <span class="p">:</span> <span class="n">utc_now</span><span class="p">(),</span>
        <span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;Luke&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;mood&#39;</span><span class="p">:</span> <span class="s1">&#39;ðŸ‘¹&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;hello from London, UK&#39;</span><span class="p">}</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">insert_row</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>

<span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>mood</th>
      <th>message</th>
      <th>time_utc</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Sam</td>
      <td>ðŸ˜Š</td>
      <td>hello from London, UK</td>
      <td>2021-12-30 15:43:34</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Grant</td>
      <td>ðŸ˜µ</td>
      <td>hello from Christchurch, NZ</td>
      <td>2021-12-30 15:43:34</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Luke</td>
      <td>ðŸ‘¹</td>
      <td>hello from London, UK</td>
      <td>2021-12-30 15:43:36</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;Bill&#39;</span><span class="p">,</span> <span class="s1">&#39;mood&#39;</span><span class="p">:</span> <span class="s1">&#39;ðŸ‘¹&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span><span class="s1">&#39;hi&#39;</span><span class="p">,</span> <span class="s1">&#39;time_utc&#39;</span><span class="p">:</span><span class="n">arrow</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;YYYY-MM-DD HH:mm:ss&#39;</span><span class="p">)}</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">insert_row</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>mood</th>
      <th>message</th>
      <th>time_utc</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Sam</td>
      <td>ðŸ˜Š</td>
      <td>hello from London, UK</td>
      <td>2021-12-30 15:43:34</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Grant</td>
      <td>ðŸ˜µ</td>
      <td>hello from Christchurch, NZ</td>
      <td>2021-12-30 15:43:34</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Luke</td>
      <td>ðŸ‘¹</td>
      <td>hello from London, UK</td>
      <td>2021-12-30 15:43:36</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Bill</td>
      <td>ðŸ‘¹</td>
      <td>hi</td>
      <td>2021-12-30 15:43:38</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="readable_df" class="doc_header"><code>readable_df</code><a href="https://github.com/lukexyz/prodb/tree/master/prodb/core.py#L53" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>readable_df</code>(<strong><code>df</code></strong>, <strong><code>max_rows</code></strong>=<em><code>8</code></em>, <strong><code>col_name</code></strong>=<em><code>'human_time'</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;Luke&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;mood&#39;</span><span class="p">:</span> <span class="s1">&#39;ðŸ˜Š&#39;</span><span class="p">,</span> 
        <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="s1">&#39;hello, from UK&#39;</span><span class="p">,</span>
        <span class="s1">&#39;time_utc&#39;</span><span class="p">:</span> <span class="n">utc_now</span><span class="p">()}</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">insert_row</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
<span class="n">readable_df</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">max_rows</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>mood</th>
      <th>message</th>
      <th>time_utc</th>
      <th>human_time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Sam</td>
      <td>ðŸ˜Š</td>
      <td>hello from London, UK</td>
      <td>2021-12-30 15:43:34</td>
      <td>10 seconds ago</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Grant</td>
      <td>ðŸ˜µ</td>
      <td>hello from Christchurch, NZ</td>
      <td>2021-12-30 15:43:34</td>
      <td>10 seconds ago</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Luke</td>
      <td>ðŸ‘¹</td>
      <td>hello from London, UK</td>
      <td>2021-12-30 15:43:36</td>
      <td>just now</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Bill</td>
      <td>ðŸ‘¹</td>
      <td>hi</td>
      <td>2021-12-30 15:43:38</td>
      <td>just now</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Luke</td>
      <td>ðŸ˜Š</td>
      <td>hello, from UK</td>
      <td>2021-12-30 15:43:44</td>
      <td>just now</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Classify">Classify<a class="anchor-link" href="#Classify"> </a></h1><p>Extending pandas dataframes with our custom functions.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="Prodb" class="doc_header"><code>class</code> <code>Prodb</code><a href="https://github.com/lukexyz/prodb/tree/master/prodb/core.py#L60" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Prodb</code>(<strong><code>data</code></strong>=<em><code>None</code></em>, <strong><code>index</code></strong>:<code>Axes | None</code>=<em><code>None</code></em>, <strong><code>columns</code></strong>:<code>Axes | None</code>=<em><code>None</code></em>, <strong><code>dtype</code></strong>:<code>Dtype | None</code>=<em><code>None</code></em>, <strong><code>copy</code></strong>:<code>bool | None</code>=<em><code>None</code></em>) :: <code>DataFrame</code></p>
</blockquote>
<p>Two-dimensional, size-mutable, potentially heterogeneous tabular data.</p>
<p>Data structure also contains labeled axes (rows and columns).
Arithmetic operations align on both row and column labels. Can be
thought of as a dict-like container for Series objects. The primary
pandas data structure.</p>
<h2 id="Parameters">Parameters<a class="anchor-link" href="#Parameters"> </a></h2><p>data : ndarray (structured or homogeneous), Iterable, dict, or DataFrame
    Dict can contain Series, arrays, constants, dataclass or list-like objects. If
    data is a dict, column order follows insertion-order.</p>

<pre><code>.. versionchanged:: 0.25.0
   If data is a list of dicts, column order follows insertion-order.

</code></pre>
<p>index : Index or array-like
    Index to use for resulting frame. Will default to RangeIndex if
    no indexing information part of input data and no index provided.
columns : Index or array-like
    Column labels to use for resulting frame when data does not have them,
    defaulting to RangeIndex(0, 1, 2, ..., n). If data contains column labels,
    will perform column selection instead.
dtype : dtype, default None
    Data type to force. Only a single dtype is allowed. If None, infer.
copy : bool or None, default None
    Copy data from inputs.
    For dict data, the default of None behaves like <code>copy=True</code>.  For DataFrame
    or 2d ndarray input, the default of None behaves like <code>copy=False</code>.</p>

<pre><code>.. versionchanged:: 1.3.0

</code></pre>
<h2 id="See-Also">See Also<a class="anchor-link" href="#See-Also"> </a></h2><p>DataFrame.from_records : Constructor from tuples, also record arrays.
DataFrame.from_dict : From dicts of Series, arrays, or dicts.
read_csv : Read a comma-separated values (csv) file into DataFrame.
read_table : Read general delimited file into DataFrame.
read_clipboard : Read text from clipboard into DataFrame.</p>
<h2 id="Examples">Examples<a class="anchor-link" href="#Examples"> </a></h2><p>Constructing DataFrame from a dictionary.</p>
<blockquote><blockquote><blockquote><p>d = {'col1': [1, 2], 'col2': [3, 4]}
df = pd.DataFrame(data=d)
df
   col1  col2
0     1     3
1     2     4</p>
</blockquote>
</blockquote>
</blockquote>
<p>Notice that the inferred dtype is int64.</p>
<blockquote><blockquote><blockquote><p>df.dtypes
col1    int64
col2    int64
dtype: object</p>
</blockquote>
</blockquote>
</blockquote>
<p>To enforce a single dtype:</p>
<blockquote><blockquote><blockquote><p>df = pd.DataFrame(data=d, dtype=np.int8)
df.dtypes
col1    int8
col2    int8
dtype: object</p>
</blockquote>
</blockquote>
</blockquote>
<p>Constructing DataFrame from numpy ndarray:</p>
<blockquote><blockquote><blockquote><p>df2 = pd.DataFrame(np.array([[1, 2, 3], [4, 5, 6], [7, 8, 9]]),
...                    columns=['a', 'b', 'c'])
df2
   a  b  c
0  1  2  3
1  4  5  6
2  7  8  9</p>
</blockquote>
</blockquote>
</blockquote>
<p>Constructing DataFrame from a numpy ndarray that has labeled columns:</p>
<blockquote><blockquote><blockquote><p>data = np.array([(1, 2, 3), (4, 5, 6), (7, 8, 9)],
...                 dtype=[("a", "i4"), ("b", "i4"), ("c", "i4")])
df3 = pd.DataFrame(data, columns=['c', 'a'])
...
df3
   c  a
0  3  1
1  6  4
2  9  7</p>
</blockquote>
</blockquote>
</blockquote>
<p>Constructing DataFrame from dataclass:</p>
<blockquote><blockquote><blockquote><p>from dataclasses import make_dataclass
Point = make_dataclass("Point", [("x", int), ("y", int)])
pd.DataFrame([Point(0, 0), Point(0, 3), Point(2, 3)])
   x  y
0  0  0
1  0  3
2  2  3</p>
</blockquote>
</blockquote>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Initialize">Initialize<a class="anchor-link" href="#Initialize"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Sam&#39;</span><span class="p">,</span> <span class="s1">&#39;Grant&#39;</span><span class="p">],</span>
        <span class="s1">&#39;mood&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;ðŸ˜Š&#39;</span><span class="p">,</span> <span class="s1">&#39;ðŸ˜µ&#39;</span><span class="p">],</span>
        <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;hi&#39;</span><span class="p">,</span> <span class="s1">&#39;hello&#39;</span><span class="p">],</span>
        <span class="s1">&#39;time_utc&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="n">arrow</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;YYYY-MM-DD HH:mm:ss&#39;</span><span class="p">),</span>
                      <span class="n">arrow</span><span class="o">.</span><span class="n">utcnow</span><span class="p">()</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s1">&#39;YYYY-MM-DD HH:mm:ss&#39;</span><span class="p">)]}</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">Prodb</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span><span class="o">.</span><span class="n">prodb_generate</span><span class="p">(</span><span class="n">dbpath</span><span class="o">=</span><span class="s1">&#39;db.csv&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>âœ“ðŸ’¾ db.csv (96 KB)	shape: (2, 4)</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>mood</th>
      <th>message</th>
      <th>time_utc</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Sam</td>
      <td>ðŸ˜Š</td>
      <td>hi</td>
      <td>2021-12-30 16:29:55</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Grant</td>
      <td>ðŸ˜µ</td>
      <td>hello</td>
      <td>2021-12-30 16:29:55</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Example:-Insert-single-row">Example: Insert single row<a class="anchor-link" href="#Example:-Insert-single-row"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">prodb_insert</span><span class="p">({</span><span class="s1">&#39;name&#39;</span><span class="p">:</span><span class="s1">&#39;George&#39;</span><span class="p">,</span> <span class="s1">&#39;mood&#39;</span><span class="p">:</span> <span class="s1">&#39;ðŸ‘¹&#39;</span><span class="p">,</span> <span class="s1">&#39;message&#39;</span><span class="p">:</span><span class="s1">&#39;hi&#39;</span><span class="p">})</span>
<span class="n">df</span><span class="o">.</span><span class="n">prodb_summary</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>âœ“ðŸ’¾ db.csv (112 KB)	shape: (3, 4)</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>mood</th>
      <th>message</th>
      <th>time_utc</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Sam</td>
      <td>ðŸ˜Š</td>
      <td>hi</td>
      <td>2021-12-30 16:29:55</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Grant</td>
      <td>ðŸ˜µ</td>
      <td>hello</td>
      <td>2021-12-30 16:29:55</td>
    </tr>
    <tr>
      <th>2</th>
      <td>George</td>
      <td>ðŸ‘¹</td>
      <td>hi</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Example:-Insert-multiple-rows">Example: Insert multiple rows<a class="anchor-link" href="#Example:-Insert-multiple-rows"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Multiple&#39;</span><span class="p">,</span> <span class="s1">&#39;Rows&#39;</span><span class="p">],</span>
        <span class="s1">&#39;mood&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;ðŸ˜Š&#39;</span><span class="p">,</span> <span class="s1">&#39;ðŸ˜µ&#39;</span><span class="p">],</span>
        <span class="s1">&#39;message&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;hello&#39;</span><span class="p">,</span> <span class="s1">&#39;hello&#39;</span><span class="p">],</span>
        <span class="s1">&#39;time_utc&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="n">utc_now</span><span class="p">(),</span> <span class="n">utc_now</span><span class="p">()]}</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">prodb_insert</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">prodb_summary</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>âœ“ðŸ’¾ db.csv (188 KB)	shape: (5, 4)</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>mood</th>
      <th>message</th>
      <th>time_utc</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Sam</td>
      <td>ðŸ˜Š</td>
      <td>hi</td>
      <td>2021-12-30 16:29:55</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Grant</td>
      <td>ðŸ˜µ</td>
      <td>hello</td>
      <td>2021-12-30 16:29:55</td>
    </tr>
    <tr>
      <th>2</th>
      <td>George</td>
      <td>ðŸ‘¹</td>
      <td>hi</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Multiple</td>
      <td>ðŸ˜Š</td>
      <td>hello</td>
      <td>2021-12-30 16:29:56</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Rows</td>
      <td>ðŸ˜µ</td>
      <td>hello</td>
      <td>2021-12-30 16:29:56</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%%time</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">prodb_insert</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">prodb_summary</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>âœ“ðŸ’¾ db.csv (948 KB)	shape: (25, 4)</pre>
</div>
</div>

<div class="output_area">


<div class="output_html rendered_html output_subarea ">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>mood</th>
      <th>message</th>
      <th>time_utc</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>20</th>
      <td>Rows</td>
      <td>ðŸ˜µ</td>
      <td>hello</td>
      <td>2021-12-30 16:29:56</td>
    </tr>
    <tr>
      <th>21</th>
      <td>Multiple</td>
      <td>ðŸ˜Š</td>
      <td>hello</td>
      <td>2021-12-30 16:29:56</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Rows</td>
      <td>ðŸ˜µ</td>
      <td>hello</td>
      <td>2021-12-30 16:29:56</td>
    </tr>
    <tr>
      <th>23</th>
      <td>Multiple</td>
      <td>ðŸ˜Š</td>
      <td>hello</td>
      <td>2021-12-30 16:29:56</td>
    </tr>
    <tr>
      <th>24</th>
      <td>Rows</td>
      <td>ðŸ˜µ</td>
      <td>hello</td>
      <td>2021-12-30 16:29:56</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>CPU times: user 31.2 ms, sys: 0 ns, total: 31.2 ms
Wall time: 66.9 ms
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

